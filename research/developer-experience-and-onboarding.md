# Developer Experience and Onboarding

**Domain**: Self-Service Adoption & Progressive Disclosure
**Research Focus**: Making infrastructure delightful and easy to adopt
**Alignment**: MERCURIO Characteristics 2, 4, 6, 10

---

## Core Philosophy

**Great DX** (Developer Experience) means:
1. **Instant Gratification**: Working example in < 2 minutes
2. **Pit of Success**: Harder to do wrong thing than right thing
3. **Progressive Disclosure**: Complexity revealed as needed
4. **Self-Service**: Zero waiting for help/approval
5. **Delightful**: Pleasant surprises, not frustrating surprises

**Measure Success**: Net Promoter Score (NPS) from developers using your infrastructure.

---

## Progressive Complexity Architecture (94%)

### Layer 1: "Hello World" (< 2 minutes)

**Goal**: Prove it works immediately.

```bash
# One-line installation and verification
npx @djed/create-template mcp-server my-first-server && cd my-first-server && npm start

# Output:
# ‚úì Created my-first-server
# ‚úì Installed dependencies
# ‚úì Running on http://localhost:3000
#
# Try it:
#   curl http://localhost:3000/health
#
# Next steps:
#   - Edit src/index.ts to add your logic
#   - Run npm test to verify
#   - See README.md for more
```

**Success Metric**: 90% of developers get working example within 2 minutes.

### Layer 2: "First Real Feature" (< 30 minutes)

**Goal**: Ship something valuable to production.

```typescript
// src/index.ts (generated by template)
import { createServer } from '@djed/mcp-base';

const server = createServer({
  name: 'my-first-server',
  version: '1.0.0',
});

// TODO: Add your first tool here
// Example provided below (uncomment to use):

/*
server.tool('greet', {
  description: 'Greet a user by name',
  parameters: {
    name: { type: 'string', description: 'User name' },
  },
  handler: async ({ name }) => {
    return `Hello, ${name}!`;
  },
});
*/

server.start();
```

**Guidance**:
1. Clear TODO comment at insertion point
2. Working example in comment (copy, uncomment, customize)
3. Type hints guide correct usage
4. Error messages point to documentation

**Success Metric**: 70% of developers ship first feature within 30 minutes.

### Layer 3: "Production Ready" (< 1 week)

**Goal**: All the things needed for production.

**Generated Checklist**:
```markdown
## Production Readiness Checklist

### Code Quality
- [x] Tests passing (auto-generated)
- [ ] Additional tests for your features
- [ ] Code coverage > 80%

### Security
- [x] Dependencies audited (npm audit)
- [ ] Secrets in environment variables (not code)
- [ ] Input validation on all endpoints

### Observability
- [x] Logging configured (via @djed/logger)
- [ ] Custom metrics added
- [ ] Error tracking configured

### Deployment
- [x] Docker image builds (Dockerfile included)
- [ ] CI/CD pipeline configured (.github/workflows/)
- [ ] Deployed to staging
- [ ] Deployed to production

See docs/PRODUCTION.md for details.
```

**Success Metric**: 40% of developers reach production within 1 week.

---

## Self-Service Developer Experience (91%)

### Pattern 1: Zero-Friction Installation

```bash
# ‚úÖ Good: Single command, no prerequisites
npx @djed/create-template mcp-server my-server

# ‚ùå Bad: Multi-step with manual configuration
npm install -g @djed/cli
djed init
# Answer 15 questions
# Manually edit config file
# Run djed generate
```

**Principles**:
- Minimize steps to value
- No global installation required (use `npx`)
- Smart defaults (no configuration needed to start)
- Validation built-in (fail fast with clear errors)

### Pattern 2: Inline Guidance

```typescript
// Generated code includes helpful comments

import { createServer } from '@djed/mcp-base';

const server = createServer({
  // Server name (used in logs and metrics)
  name: 'my-server',

  // Version (follows semver: major.minor.patch)
  version: '1.0.0',

  // Optional: Custom logger
  // logger: createLogger({ level: 'debug' }),
});

// Add tools here
// Example:
//   server.tool('name', { /* config */ });
//
// See docs/GUIDE.md for more examples

server.start();
```

**Principles**:
- Comments explain "why", not just "what"
- Examples at point of use
- Link to detailed docs for deep dives
- Optional features shown but commented out

### Pattern 3: Helpful Error Messages

```typescript
// ‚ùå Bad: Cryptic error
Error: Invalid config
  at createServer (index.ts:42)

// ‚úÖ Good: Actionable error
Error: Invalid server configuration

  Missing required field: "name"

  Expected:
    createServer({
      name: 'my-server',    // ‚Üê Add this
      version: '1.0.0',
    })

  See: https://djed.dev/docs/api#createServer

  at createServer (index.ts:42)
```

**Principles**:
- State what's wrong clearly
- Show correct example
- Link to documentation
- Include context (where in code)

### Pattern 4: Interactive Setup

```typescript
// npx @djed/create-template (no args) ‚Üí interactive mode

import inquirer from 'inquirer';

async function interactiveSetup() {
  const answers = await inquirer.prompt([
    {
      type: 'list',
      name: 'template',
      message: 'What would you like to create?',
      choices: [
        { name: 'MCP Server', value: 'mcp-server' },
        { name: 'Docker Service', value: 'docker-service' },
        { name: 'GitHub Action', value: 'github-action' },
      ],
    },
    {
      type: 'input',
      name: 'name',
      message: 'Project name:',
      default: 'my-project',
      validate: (input) => {
        if (!/^[a-z0-9-]+$/.test(input)) {
          return 'Name must be lowercase letters, numbers, and hyphens only';
        }
        return true;
      },
    },
    {
      type: 'confirm',
      name: 'typescript',
      message: 'Use TypeScript?',
      default: true,
    },
  ]);

  return answers;
}
```

**Principles**:
- Expert mode: CLI args (fast, scriptable)
- Beginner mode: Interactive (guided, validating)
- Both paths reach same result

---

## Community and Contribution Enablement (85%)

### Pattern 1: Contribution Quickstart

```markdown
# CONTRIBUTING.md

## Quick Start for Contributors

### 1. Set Up Development Environment (< 5 minutes)

```bash
git clone https://github.com/luxor/djed
cd djed
npm install
npm test
```

All tests should pass ‚úì

### 2. Make Your Change

```bash
# Create a branch
git checkout -b my-feature

# Make changes
code src/

# Verify
npm test
npm run lint

# Commit
git commit -m "feat: add awesome feature"
```

### 3. Submit PR

```bash
git push origin my-feature
```

Then open PR at: https://github.com/luxor/djed/pulls

### Need Help?

- üí¨ Discord: https://discord.gg/djed
- üìñ Docs: https://djed.dev/contributing
- üêõ Issues: https://github.com/luxor/djed/issues
```

**Success Metric**: Time from "clone" to "first PR submitted" < 1 hour.

### Pattern 2: Recognition and Growth

```markdown
# CONTRIBUTORS.md

## All Contributors

Thanks to these wonderful people ([emoji key](https://allcontributors.org/docs/en/emoji-key)):

<!-- ALL-CONTRIBUTORS-LIST:START -->
| [<img src="..." width="100px;" alt=""/><br /><sub><b>Alice</b></sub>](https://github.com/alice)<br />[üíª](# "Code") [üìñ](# "Docs") | [<img src="..." width="100px;" alt=""/><br /><sub><b>Bob</b></sub>](https://github.com/bob)<br />[üêõ](# "Bug reports") | ...
<!-- ALL-CONTRIBUTORS-LIST:END -->

This project follows the [all-contributors](https://allcontributors.org) specification.
Contributions of any kind are welcome!
```

**Automated Recognition**:
```yaml
# .github/workflows/contributors.yml
- uses: all-contributors/action@v1
  with:
    args: add alice code,doc
```

### Pattern 3: Graduated Complexity for Contributors

**Level 1: Good First Issues**
```markdown
üÜï **Good First Issue**: Add example for Express.js integration

- Clear scope: Single example file
- Guidance: See examples/fastify/ for structure
- Mentor: @alice will review
- Estimated time: 1-2 hours
```

**Level 2: Feature Contributions**
```markdown
üéØ **Feature Request**: Add custom transport support

- Design doc required
- Breaking change: Needs RFC
- Estimated time: 1-2 weeks
```

**Level 3: Maintainer Track**
```markdown
üåü **Become a Maintainer**

After 5+ quality contributions:
- Triage access (label issues)
- Review access (approve PRs)
- Release access (publish versions)
```

---

## Onboarding Metrics

### Adoption Funnel

```
100% Discover (@djed/create-template)
  ‚Üì
 80% Install (npx @djed/create-template)
  ‚Üì
 60% First Run (npm start)
  ‚Üì
 40% First Feature (commit custom code)
  ‚Üì
 20% Production (deploy)
  ‚Üì
 10% Advocate (recommend to others)
```

**Track at each stage**:
- Where do users drop off?
- Why? (surveys, user interviews)
- How to improve?

### Success Metrics

| Metric | Target | Measurement |
|--------|--------|-------------|
| Time to "Hello World" | < 2 min | Automated timing |
| Time to first feature | < 30 min | User surveys |
| Time to production | < 1 week | Telemetry (opt-in) |
| Net Promoter Score (NPS) | > 50 | Quarterly survey |
| GitHub Stars | +20%/quarter | GitHub API |
| Active contributors | +10%/quarter | GitHub stats |

---

## Practical Recommendations

### For Infrastructure Authors

1. **Time Yourself**: Can you get to "Hello World" in 2 minutes? Users can't if you can't.
2. **Watch Users**: Observe someone using your tool for the first time. Where do they struggle?
3. **Minimize Decisions**: Every question is friction. Provide smart defaults.
4. **Celebrate Contributors**: Recognition >> payment for open source contributors.
5. **Measure Continuously**: Track adoption funnel, iterate on weak points.

### For Infrastructure Consumers

1. **Give Feedback**: Maintainers want to know what's confusing.
2. **Contribute Docs**: Hardest for experts to write beginner docs. You can help.
3. **Share Wins**: When something works great, tell others.
4. **Report Bugs Kindly**: Include reproduction, don't just complain.

---

## Anti-Patterns to Avoid

‚ùå **Assumed Knowledge**: "Just configure your OAuth2 PKCE flow"
‚ùå **Analysis Paralysis**: Too many options before getting started
‚ùå **Undiscoverable Features**: Power features with no documentation
‚ùå **Ignored Contributors**: PRs sitting for weeks with no response
‚ùå **Hostile Community**: RTFM culture drives people away

---

## References

- **Stripe Developer Experience**: Gold standard for DX
- **Next.js Onboarding**: Progressive complexity done right
- **Rust Book**: Excellent educational progression
- **All Contributors**: Recognize all types of contributions

---

**Status**: ‚úÖ Research Complete
**Word Count**: 495
**Next**: Operational Excellence for Shared Libraries
